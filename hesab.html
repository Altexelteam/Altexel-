<html lang="az"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hesab</title>
    <link rel="stylesheet" href="stylehesab.css">
</head>
<body>
    <div class="container">
        <div class="form-box">
            <h2 id="form-title">Daxil Ol</h2>
            <form id="form">
                <div class="input-box">
                    <input type="text" id="username" required="">
                    <label>İstifadəçi adı</label>
                </div>
                <div class="input-box">
                    <input type="email" id="email" required="">
                    <label>Email</label>
                </div>
                <div class="input-box">
                    <input type="password" id="password" required="">
                    <label>Şifrə</label>
                </div>
                <button type="submit" class="btn">Daxil Ol</button>
                <p id="toggle-form">Hesabınız yoxdur? <a href="#">Qeydiyyatdan keçin</a></p>
            </form>
        </div>
    </div>

    <script>
        const formTitle = document.getElementById("form-title");
        const form = document.getElementById("form");
        const toggleText = document.getElementById("toggle-form");
        let isLogin = true;

        toggleText.addEventListener("click", function () {
            isLogin = !isLogin;
            if (!isLogin) {
                formTitle.innerText = "Qeydiyyatdan Keç";
                form.innerHTML = `
                    <div class="input-box">
                        <input type="text" id="username" required>
                        <label>İstifadəçi adı</label>
                    </div>
                    <div class="input-box">
                        <input type="email" id="email" required>
                        <label>Email</label>
                    </div>
                    <div class="input-box">
                        <input type="password" id="password" required>
                        <label>Şifrə</label>
                    </div>
                    <button type="submit" class="btn">Qeydiyyatdan Keç</button>
                    <p id="toggle-form">Artıq hesabınız var? <a href="#">Daxil olun</a></p>
                `;
            } else {
                formTitle.innerText = "Daxil Ol";
                form.innerHTML = `
                    <div class="input-box">
                        <input type="email" id="email" required>
                        <label>Email</label>
                    </div>
                    <div class="input-box">
                        <input type="password" id="password" required>
                        <label>Şifrə</label>
                    </div>
                    <button type="submit" class="btn">Daxil Ol</button>
                    <p id="toggle-form">Hesabınız yoxdur? <a href="#">Qeydiyyatdan keçin</a></p>
                `;
            }
        });

        document.addEventListener("submit", function (e) {
            e.preventDefault();
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;
            const username = document.getElementById("username") ? document.getElementById("username").value : null;

            if (!isLogin) {
                // Qeydiyyat
                if (localStorage.getItem(email)) {
                    alert("Bu email artıq istifadə olunur!");
                    return;
                }

                const userData = { username, email, password };
                localStorage.setItem(email, JSON.stringify(userData));
                alert("Qeydiyyat uğurlu oldu! İndi daxil ola bilərsiniz.");
                location.reload();
            } else {
                // Giriş
                const storedUser = localStorage.getItem(email);
                if (!storedUser) {
                    alert("Bu email ilə istifadəçi tapılmadı!");
                    return;
                }

                const user = JSON.parse(storedUser);
                if (user.password !== password) {
                    alert("Yanlış şifrə!");
                    return;
                }

                alert(`Xoş gəldiniz, ${user.username}!`);
                localStorage.setItem("currentUser", email);
                window.location.href = "dashboard.html";
            }
        });
    </script>


</body></html>